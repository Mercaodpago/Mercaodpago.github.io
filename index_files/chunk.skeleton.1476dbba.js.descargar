(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([[7053],{57562:(e,t,n)=>{var i=n(18053),s,r;const a=n(19955),o=n(53142),{v4:c}=n(70272),{bindActionCreators:l}=n(24333),{connect:d}=n(69507),{loadable:h,LazyHydrate:v}=n(51444),f=h({resolved:{},chunkName:()=>"containers-Optimus",isReady(e){const t=this.resolve(e);return!0===this.resolved[t]&&!!n.m[t]},importAsync:()=>n.e(5380).then(n.t.bind(n,33569,23)),requireAsync(e){const t=this.resolve(e);return this.resolved[t]=!1,this.importAsync(e).then((e=>(this.resolved[t]=!0,e)))},requireSync(e){const t=this.resolve(e);return n(t)},resolve(){return 33569}}),{getQueryParams:u}=n(95922),p=n(50375),w=n(47257),E=n(17799),_=n(25226),{isIframe:R}=n(95922),{checkIfCookiesAreBlocked:S}=n(8510),{CREATE_FLOW:A}=n(88220),{DEVICE_TYPE:g}=n(73763),{updatePageView:T,trackMelidata:m}=n(77241),{logErrorFromClient:I}=n(37427),{ERROR_SPA:{SNIFFING_TRACKING_ERROR:y,SKELETON_TRACKING_ERROR:k,SNIFFING_SAFARI_ERROR:F},SNIFFING_ATTEMPT_STATUS:N,QUERY_PARAMS:O,BROWSER_NAME:P}=n(3320),L=e=>[P.SAFARI,P.MOBILE_SAFARI].includes(e),C=e=>{e.searchParams.delete(O.SNIFFING_ROLLOUT),e.searchParams.delete(O.SNIFFING_FORCE_APP),e.searchParams.delete(O.SNIFFING_FORCE_STRATEGY),e.searchParams.set(O.NAVIGATE_TO_APP,"false"),window.location.replace(e)},b=e=>{const{deviceType:t,stepTitle:n,currentStep:l,firstRender:d,checkout:h,stepActions:p,flow:P,history:b,basePath:D,isWebview:G,browserName:U}=e,M=a.useRef(!0);const B=L(U)?25:2e3;let H,K=!1;const q=()=>{clearTimeout(undefined),K=!0;const e=new URL(window.location);e.searchParams.set(O.ROUTER_REQUEST_ID,c()),window.history.pushState({},"",e),window.close()},W=()=>{try{var t,n;if(Object.keys(null!==(t=null===(n=e.sniffing)||void 0===n?void 0:n.skeletonTrackingData)&&void 0!==t?t:{}).length){const{melidata:t,ga:n}=e.sniffing.skeletonTrackingData;T(n.path,n.data,e),m({path:t.path,payload:t.data},e)}}catch(e){I(e,k,"[SkeletonScreen][skeletonHandler]")}R()&&S()&&(M.current=!1,window.location.replace(o.join(D,"/".concat(h.type,"/restart-flow").concat(window.location.search)))),d&&M.current&&(h.is_redirect_iframe="redirect"===h.type&&R(),h.sniffing_attempt=H||N.NO_SNIFFING_ATTEMPT,p[A](P,u(),h,b))},j=async()=>{if(window.addEventListener("visibilitychange",q,!0),window.addEventListener("pagehide",q,!0),await new Promise((t=>{const n=()=>{if(e.sniffing.urls.length){const t=e.sniffing.urls.shift();t.length&&window.location.replace(t),setTimeout(n,B)}else t()};n()})),!K){H=N.FAILED,window.removeEventListener("visibilitychange",q,!0),window.removeEventListener("pagehide",q,!0);try{var t;if(Object.keys(null!==(t=e.sniffing.skeletonTrackingData)&&void 0!==t?t:{}).length){const{melidata:t,ga:n}=e.sniffing.skeletonTrackingData;T(n.path,n.data,e),m({path:t.path,payload:t.data},e)}}catch(e){I(e,y,"[SkeletonScreen][sniffingHandler]")}const n=new URL(window.location.href);L(U)?n.searchParams.has(O.PREFERENCE_ID)?C(n):(I(new Error("Could not get window location at Safari"),F,"[SkeletonScreen][sniffingHandler]"),W()):W()}H=N.SUCCESSFUL};return a.useEffect((()=>{var n;t===g.MOBILE&&null!==(n=e.sniffing)&&void 0!==n&&n.urls.length&&!G?j():W()}),[]),i(_,{title:n,currentStep:l,deviceType:t,showLoader:!1,checkForCookie:!1},void 0,"desktop"===t?s||(s=i(w,{})):r||(r=i(E,{})),i("div",{style:{display:"hidden"}},void 0,i(v,{whenIdle:!0},void 0,i(f,{components:[],history:{},onStepSubmit:()=>null,siteId:"",urls:"",deviceType:"",publicKey:"",hiddenComponents:""}))))};b.defaultProps={stepTitle:"",currentStep:"",deviceType:""};const D=e=>({stepActions:l(p,e)}),G=e=>({flow:e.page.flow,firstRender:e.page.firstRender,basePath:e.configurations.basePath,isWebview:e.configurations.isWebview});e.exports=d(G,D)(b)},70272:(e,t,n)=>{var i=n(17210),s=n(95275),r=s;r.v1=i,r.v4=s,e.exports=r},17210:(e,t,n)=>{var i,s,r=n(88508),a=n(38789),o=0,c=0;e.exports=function(e,t,n){var l=t&&n||0,d=t||[],h=(e=e||{}).node||i,v=void 0!==e.clockseq?e.clockseq:s;if(null==h||null==v){var f=r();null==h&&(h=i=[1|f[0],f[1],f[2],f[3],f[4],f[5]]),null==v&&(v=s=16383&(f[6]<<8|f[7]))}var u=void 0!==e.msecs?e.msecs:(new Date).getTime(),p=void 0!==e.nsecs?e.nsecs:c+1,w=u-o+(p-c)/1e4;if(w<0&&void 0===e.clockseq&&(v=v+1&16383),(w<0||u>o)&&void 0===e.nsecs&&(p=0),p>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");o=u,c=p,s=v;var E=(1e4*(268435455&(u+=122192928e5))+p)%4294967296;d[l++]=E>>>24&255,d[l++]=E>>>16&255,d[l++]=E>>>8&255,d[l++]=255&E;var _=u/4294967296*1e4&268435455;d[l++]=_>>>8&255,d[l++]=255&_,d[l++]=_>>>24&15|16,d[l++]=_>>>16&255,d[l++]=v>>>8|128,d[l++]=255&v;for(var R=0;R<6;++R)d[l+R]=h[R];return t||a(d)}}}]);
//# sourceMappingURL=chunk.skeleton.1476dbba.js.map